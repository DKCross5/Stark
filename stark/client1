#!/usr/bin/env python

import websockets
from websockets.sync.client import connect
import json
import asyncio

async def Send_Data():
    uri1 = "ws://localhost:8765"
    async with websockets.connect(uri1) as websocket:
        name = "ESP2"
        data_strings = [
            json.dumps({"name": name})
        ]
        for data in data_strings:
            await websocket.send(data)
            print(f"sent to server: {data}")
            response = await websocket.recv()
        print("Recieved from Server: ", json.loads(response))

if __name__ == "__main__":
    asyncio.run(Send_Data())

